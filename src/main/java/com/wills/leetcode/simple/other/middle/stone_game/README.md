# [石子游戏 IX](https://leetcode-cn.com/problems/stone-game-ix/)<font color=orange>中等</font>

Alice 和 Bob 再次设计了一款新的石子游戏。现有一行 n 个石子，每个石子都有一个关联的数字表示它的价值。给你一个整数数组 stones ，其中 stones[i] 是第 i 个石子的价值。

Alice 和 Bob 轮流进行自己的回合，Alice 先手。每一回合，玩家需要从 stones 中移除任一石子。

如果玩家移除石子后，导致 所有已移除石子 的价值 总和 可以被 3 整除，那么该玩家就 输掉游戏 。
如果不满足上一条，且移除后没有任何剩余的石子，那么 Bob 将会直接获胜（即便是在 Alice 的回合）。
假设两位玩家均采用 最佳 决策。如果 Alice 获胜，返回 true ；如果 Bob 获胜，返回 false 。

 

示例 1：

> 输入：stones = [2,1]
> 输出：true
> 解释：游戏进行如下：
>
> - 回合 1：Alice 可以移除任意一个石子。
> - 回合 2：Bob 移除剩下的石子。 
>   已移除的石子的值总和为 1 + 2 = 3 且可以被 3 整除。因此，Bob 输，Alice 获胜。

示例 2：

> 输入：stones = [2]
> 输出：false
> 解释：Alice 会移除唯一一个石子，已移除石子的值总和为 2 。 
> 由于所有石子都已移除，且值总和无法被 3 整除，Bob 获胜。

示例 3：

> 输入：stones = [5,1,2,4,3]
> 输出：false
> 解释：Bob 总会获胜。其中一种可能的游戏进行方式如下：
>
> - 回合 1：Alice 可以移除值为 1 的第 2 个石子。已移除石子值总和为 1 。
> - 回合 2：Bob 可以移除值为 3 的第 5 个石子。已移除石子值总和为 = 1 + 3 = 4 。
> - 回合 3：Alices 可以移除值为 4 的第 4 个石子。已移除石子值总和为 = 1 + 3 + 4 = 8 。
> - 回合 4：Bob 可以移除值为 2 的第 3 个石子。已移除石子值总和为 = 1 + 3 + 4 + 2 = 10.
> - 回合 5：Alice 可以移除值为 5 的第 1 个石子。已移除石子值总和为 = 1 + 3 + 4 + 2 + 5 = 15.
>   Alice 输掉游戏，因为已移除石子值总和（15）可以被 3 整除，Bob 获胜。



拿到这道题，由于是博弈类别的游戏，所以很敏感的我们就可以联想到这一定是找规律的问题，无奈找了很久的规律都没有答案，无奈只能看答案，由于官方的答案晦涩难懂，在辗转几个刷题大神的讲解帖子下，终于明白了其中的奥妙:

首先，下面代码为什么要先声明一个长度为3的整数数组？
因为题目要求已经移除的石头价值总和是否可以被3整除，所以一共就有三种结果 0，1，2

```java
public static boolean stoneGameIX(int[] stones) {
    int[] stoneRes = new int[3];
    for (int stone : stones) {
        stoneRes[stone%3]++;
    }
    // 进行 0 数量的奇偶性判断
    if(stoneRes[0] % 2 == 0){
        // 如果为偶数,就要判断 stoneRes[1] stoneRes[2]是否都大于0，如果都大于0，就返回true即可
        if(stoneRes[1] > 0 && stoneRes[2] > 0) return true;
        return false;
    }
    // 如果为奇数，就要看绝对值差是否大于2
    int difference = Math.abs(stoneRes[1] - stoneRes[2]);
    return difference > 2;
}
```

解题步骤：

1. 声明一个新的数组(长度为3)，
2. 分别计算数组内的每一次求模后的结果
3. 我们来探究一下 游戏的情况
 i. 我们先看0的数量即 stoneRes[0]对最后获胜方的影响
     a. 0 的数量对价值总和没影响，所以 0 的数量只和奇偶性有关，和大小无关
  ii. 然后看stoneRes[1]、stoneRes[2]对最后获胜方的影响
     a. 如果一开始 Alice 选了1，那么选取的顺序应该是 1,1,2,1,2,1,2,1......
     b. 如果一开始 Alice 选了2，那么选取的顺序应该是 2,2,1,2,1,2,1,2......、
 总结：
 1. 如果0的数量为偶数，因为Alice先手，只要stoneRes[1]和stoneRes[2]都大于0即可，就是Alice赢
     {
         解释：
         为什么 stoneRes[1]和stoneRes[2]都要大于0，假设我们传入的值为
         [5,8,2,2,1] => [2,2,2,2,1] 因为Alice先手，所以符合上方第3步的 ii下b的逻辑
         依次的顺序为 2,2,1,2,2 由于是Bob移除了最后一个2，导致总价值s=9，被3整除。所以在这种条件下Alice必赢
     }
 2. 如果0的数量为奇数，相当于1和2的序列里面可以插一个0，因为Alice先手，
     只要stoneRes[1]和stoneRes[2]之间绝对之差2,则Alice赢
     (
         解释：
         为什么要绝对值差2，如果序列为 [5,8,2,2,3] => [2,2,2,2,0]
         由于 Alice先手，所以 他先拿 2，则 Bob可以拿2，如果Alice想赢肯定要穿插0，
         后面Bob无论如何也要拿一个2，所以在这种条件下 Alice必赢
     )



经过以上的讨论与解析，终于成功AC！不过很遗憾，今天每日一题挑战以失败告终！让我们再接再厉吧！

![image-20220120112050972](http://rloqc3ngo.hd-bkt.clouddn.com/image-20220120112050972.png)